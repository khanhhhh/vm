#include"thread.h"
#include<stdio.h>
#include<string.h>
#include<stdint.h>
#include<stdlib.h>
thread	thread_new(uint8_t *code, object *data);
int main() {
	char str[14] = "hello world!\n";
	uint32_t len = 14;


	uint32_t *data = malloc(len * sizeof(uint32_t));
	for (uint32_t i=0; i<len; i++) {
		data[i] = (uint32_t) str[i];
	}

	uint8_t code[] = {
		0x00,
		0x22, 0x00, 0x00, 0x00, 0x00,
		0x22, 0x01, 0x00, 0x00, 0x00,
		0x22, 0x02, 0x00, 0x00, 0x00,
		0x22, 0x03, 0x00, 0x00, 0x00,
		0x22, 0x04, 0x00, 0x00, 0x00,
		0x22, 0x05, 0x00, 0x00, 0x00,
		0x22, 0x06, 0x00, 0x00, 0x00,
		0x22, 0x07, 0x00, 0x00, 0x00,
		0x22, 0x08, 0x00, 0x00, 0x00,
		0x22, 0x09, 0x00, 0x00, 0x00,
		0x22, 0x0a, 0x00, 0x00, 0x00,
		0x22, 0x0b, 0x00, 0x00, 0x00,
		0x22, 0x0c, 0x00, 0x00, 0x00,
		0x22, 0x0d, 0x00, 0x00, 0x00,
		0xfe,
		0xfe,
		0xfe,
		0xfe,
		0xfe,
		0xfe,
		0xfe,
		0xfe,
		0xfe,
		0xfe,
		0xfe,
		0xfe,
		0xfe,
		0xfe,
		0xff
	};

	thread t = thread_new(code, data);
	
	thread_loop(&t);

	return 0;
}
